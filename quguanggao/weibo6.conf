#!name=Weibo_极致冰封版_v5
#!desc=牺牲非核心功能，将签到/直播/视频/开屏/皮肤全部Reject，仅保留Timeline和发现页脚本。

[mitm]
hostname = api.weibo.cn, m.api.weibo.cn, *.weibo.cn, *.weibo.com, weibo.com

[rewrite_local]

# ==========================================
# 1. 静态资源“秒杀” (0 CPU占用)
# ==========================================
# 依然保留 Naisi 的图片拦截，这是省电的基石
^https?:\/\/(fastimage|adimg|sdkapp|wbapp)\.uve\.weibo\.com url reject
^https?:\/\/.*(promote|game|adimg|analytics|s?ads?|alitui)\.(biz|uve|vue|mcp)?\.weibo\.(c(n|om)|com\.cn) url reject
^https?:\/\/.*\.gridsumdissector\.com url reject
^https?:\/\/beacon\.sina\.com\.cn url reject

# ==========================================
# 2. 从“脚本处理”升级为“直接拒收” (核心优化点)
# ==========================================
# 这些模块以前是脚本改为空，现在直接拒收，省去了JS运行的电量

# [开屏广告] 直接拒绝配置下发，APP会认为无广告或者加载失败跳过
^https?:\/\/(sdk|wb)app\.uve\.weibo\.com(\/interface\/sdk\/sdkad\.php|\/wbapplua\/wbpullad\.lua) url reject-dict

# [首页杂项] 签到、顶部直播流、红包、发布按钮配置
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(checkin\/show|push\/active|!\/live\/media_homelist|client\/publisher_list) url reject-dict

# [视频Tab] 如果你不专门去视频页面刷视频，这个流可以直接杀掉
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/video\/(tiny_stream_video_list|community_tab|remind_info) url reject-dict

# [皮肤/会员] 禁止加载皮肤配置，强制使用默认白色/黑色，减少渲染压力
^https?:\/\/api\.weibo\.c(n|om)\/2\/!\/client\/light_skin url reject-dict
^https?:\/\/new\.vip\.weibo\.c(n|om)\/aj\/appicon\/list url reject-dict

# [搜索杂项] 搜索建议、热搜横幅
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/search\/defaultwords url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/!\/sug\/list\/finderchange url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/hot\/hours_spotlight url reject-dict

# ==========================================
# 3. 发现页/搜索页 (必须用 weibo_ads.js)
# ==========================================
# 发现页结构太复杂，直接Reject会白屏，必须用脚本清洗结构
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(search\/(finder|container_timeline|container_discover)|page|flowpage|searchall|statuses\/(container_timeline_topicpage|container_timeline_topic|container_detail|extend)) url script-response-body https://raw.githubusercontent.com/fmz200/wool_scripts/main/Scripts/weibo/weibo_ads.js

# ==========================================
# 4. 首页信息流 (必须用 weibo_main.js)
# ==========================================
# 核心体验，必须用脚本清洗广告
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(cardlist|messageflow|statuses\/(unread_)?friends(\/|_)timeline|groups\/timeline|statuses\/(container_timeline_hot|unread_hot_timeline|video_mixtimeline|repost_timeline)|profile\/(me|container_timeline)|comments\/build_comments|container\/get_item) url script-response-body https://raw.githubusercontent.com/fmz200/wool_scripts/main/Scripts/weibo/weibo_main.js

# ==========================================
# 5. 垃圾拒收 (常规项目)
# ==========================================
^https?:\/\/boot(realtime|preload)\.uve\.weibo\.com\/v\d\/ad\/(realtime|preload) url reject-dict
^https?:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/(get-lbs-cell-info\.php|sdkconfig\.php) url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(client\/addlog_batch|ad\/preload|push\/info|!\/huati\/discovery_home_bottom_channels|!\/chaohua\/discovery\/home_bottom\/switch|!\/was\/finder\/searchbarchange|!\/huati\/discovery_home_bottom_getdotinfo) url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/\d\/push\/daily url reject-dict
