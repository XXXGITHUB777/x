#!name=Weibo_极简强力版_v4
#!desc=基于用户提供的JS逻辑适配：Main净化首页，Ads专修发现页，Launch秒开屏。

[mitm]
hostname = api.weibo.cn, m.api.weibo.cn, *.weibo.cn, *.weibo.com, weibo.com

[rewrite_local]

# ==========================================
# 1. 域名级黑名单 (维持原样，最省电)
# ==========================================
# 这一步在下载图片前就拦截，是流畅和不发烫的基础
^https?:\/\/(fastimage|adimg|sdkapp|wbapp)\.uve\.weibo\.com url reject
^https?:\/\/.*(promote|game|adimg|analytics|s?ads?|alitui)\.(biz|uve|vue|mcp)?\.weibo\.(c(n|om)|com\.cn) url reject
^https?:\/\/.*\.gridsumdissector\.com url reject
^https?:\/\/beacon\.sina\.com\.cn url reject

# ==========================================
# 2. 发现页/搜索页 专属净化 (调用 weibo_ads.js)
# ==========================================
# 对应你提供的 weibo_ads.js 脚本逻辑
# 它会清洗：发现页顶部Banner、多余Tab(同城/娱乐)、热搜列表广告、超话页面
# 关键修复：不再 Reject container_discover，而是交给脚本精修
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(search\/(finder|container_timeline|container_discover)|page|flowpage|searchall|statuses\/(container_timeline_topicpage|container_timeline_topic|container_detail|extend)) url script-response-body https://raw.githubusercontent.com/fmz200/wool_scripts/main/Scripts/weibo/weibo_ads.js

# ==========================================
# 3. 首页信息流 专属净化 (调用 weibo_main.js)
# ==========================================
# 对应你提供的 weibo_main.js 脚本逻辑
# 它会清洗：首页关注流、个人主页、消息列表、评论区
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(cardlist|messageflow|statuses\/(unread_)?friends(\/|_)timeline|groups\/timeline|statuses\/(container_timeline_hot|unread_hot_timeline|video_mixtimeline|repost_timeline)|profile\/(me|container_timeline)|video\/(community_tab|remind_info|tiny_stream_video_list)|checkin\/show|(\!/)?live\/media_homelist|comments\/build_comments|container\/get_item) url script-response-body https://raw.githubusercontent.com/fmz200/wool_scripts/main/Scripts/weibo/weibo_main.js

# ==========================================
# 4. 开屏净化 (调用 weibo_launch.js)
# ==========================================
# 对应你提供的 weibo_launch.js 脚本逻辑
# 专门处理开屏广告数据包
^https?:\/\/(sdk|wb)app\.uve\.weibo\.com(\/interface\/sdk\/sdkad\.php|\/wbapplua\/wbpullad\.lua) url script-response-body https://raw.githubusercontent.com/zmqcherish/proxy-script/main/weibo_launch.js

# ==========================================
# 5. 辅助功能 (皮肤与杂项)
# ==========================================
# 皮肤处理 (如果你不需要自定义皮肤，这行可以删掉)
^https?:\/\/api\.weibo\.c(n|om)\/2\/!\/client\/light_skin url script-response-body https://raw.githubusercontent.com/zmqcherish/proxy-script/main/weibo_main.js

# ==========================================
# 6. 纯垃圾拒收 (Reject)
# ==========================================
# 这些是脚本里没写处理逻辑，或者是纯追踪请求，直接拒收最省电
^https?:\/\/boot(realtime|preload)\.uve\.weibo\.com\/v\d\/ad\/(realtime|preload) url reject-dict
^https?:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/(get-lbs-cell-info\.php|sdkconfig\.php) url reject-dict
# 屏蔽红点、打点日志、每日弹窗
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(push\/active|client\/addlog_batch|ad\/preload|push\/info|!\/huati\/discovery_home_bottom_channels|!\/chaohua\/discovery\/home_bottom\/switch|!\/was\/finder\/searchbarchange|!\/huati\/discovery_home_bottom_getdotinfo) url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/\d\/push\/daily url reject-dict
# 搜索框默认词 (直接拒收，让搜索框变干净)
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/search\/defaultwords url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/!\/sug\/list\/finderchange url reject-dict
