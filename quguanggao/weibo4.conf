#!name=Weibo_极简强力版_v2
#!desc=在v1基础上，大幅净化发现页(搜索页)，去除热搜推广、猜你想搜、默认搜索词。

[mitm]
hostname = api.weibo.cn, m.api.weibo.cn, *.weibo.cn, *.weibo.com, weibo.com

[rewrite_local]

# ==========================================
# 1. 发现页/搜索页 专项净化 (Reject)
# ==========================================
# 【核心改动】这些模块直接拒收，不加载，比脚本处理更彻底、更空白

# 屏蔽“发现页”顶部的所有Banner、图标、营销模块
# 如果你发现“发现页”变成了纯白或只剩列表，就是这条生效了
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/search\/container_discover url reject-dict

# 屏蔽搜索框里的“默认搜索词” (通常是广告)
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/search\/defaultwords url reject-dict

# 屏蔽“猜你想搜” / 搜索建议里的推广
^https?:\/\/m?api\.weibo\.c(n|om)\/!\/sug\/list\/finderchange url reject-dict

# 屏蔽热搜页面的“热推”、“时刻”等横幅
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/hot\/hours_spotlight url reject-dict

# ==========================================
# 2. 域名级黑名单 (图片拦截)
# ==========================================
^https?:\/\/(fastimage|adimg|sdkapp|wbapp)\.uve\.weibo\.com url reject
^https?:\/\/.*(promote|game|adimg|analytics|s?ads?|alitui)\.(biz|uve|vue|mcp)?\.weibo\.(c(n|om)|com\.cn) url reject
^https?:\/\/.*\.gridsumdissector\.com url reject
^https?:\/\/beacon\.sina\.com\.cn url reject

# ==========================================
# 3. 核心去广告脚本 (Timeline与内容清洗)
# ==========================================
# 这一部分保持不变，用于清洗信息流和热搜榜单里的广告条目
# 注意：我把 search/container_discover 从这里移除了，改到了上面的 Reject 规则里
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(cardlist|searchall|page|messageflow|statuses\/(unread_)?friends(\/|_)timeline|groups\/timeline|statuses\/(container_timeline|container_timeline_hot|unread_hot_timeline|extend|video_mixtimeline|repost_timeline)|profile\/(me|container_timeline)|video\/(community_tab|remind_info|tiny_stream_video_list)|checkin\/show|(\!/)?live\/media_homelist|comments\/build_comments|container\/get_item|search\/finder) url script-response-body https://raw.githubusercontent.com/fmz200/wool_scripts/main/Scripts/weibo/weibo_main.js

# ==========================================
# 4. 辅助脚本
# ==========================================
^https?:\/\/(sdk|wb)app\.uve\.weibo\.com(\/interface\/sdk\/sdkad\.php|\/wbapplua\/wbpullad\.lua) url script-response-body https://raw.githubusercontent.com/zmqcherish/proxy-script/main/weibo_launch.js
^https?:\/\/api\.weibo\.c(n|om)\/2\/!\/client\/light_skin url script-response-body https://raw.githubusercontent.com/zmqcherish/proxy-script/main/weibo_main.js

# ==========================================
# 5. 杂项拒绝
# ==========================================
^https?:\/\/boot(realtime|preload)\.uve\.weibo\.com\/v\d\/ad\/(realtime|preload) url reject-dict
^https?:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/(get-lbs-cell-info\.php|sdkconfig\.php) url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/2\/(push\/active|client\/addlog_batch|ad\/preload|push\/info|!\/huati\/discovery_home_bottom_channels|!\/chaohua\/discovery\/home_bottom\/switch|!\/was\/finder\/searchbarchange|!\/huati\/discovery_home_bottom_getdotinfo) url reject-dict
^https?:\/\/m?api\.weibo\.c(n|om)\/\d\/push\/daily url reject-dict
