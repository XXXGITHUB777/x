#!name=Bilibili_终极洁癖版
#!update=2025-12-06

[mitm]
#Hostname，防闪退、防直播卡顿
hostname = -broadcast.chat.bilibili.com, -cm.bilibili.com, -*cdn*.biliapi.net, -*tracker*.biliapi.net, app.bilibili.com, api.live.bilibili.com, *.bilibili.com, *.bili*.*, *.bilibili.*, grpc.biliapi.net, *biliapi.net

[rewrite_local]

# ==========================================
# 1. 界面 UI 重塑 (核心：墨鱼脚本)
# ==========================================
# 【关键】"我的"页面净化：去除会员购、游戏中心、推广服务，只保留核心功能
^https?:\/\/app\.bilibili\.com\/x\/v2\/account\/mine(\/ipad)?\? url script-response-body https://raw.githubusercontent.com/ddgksf2013/Scripts/master/bilibili_json.js

# 底部 Tab 栏净化 (保留：首页、动态、我的；去除会员购)
^https?:\/\/app\.bilibili\.com\/x\/resource\/show\/tab url script-response-body https://raw.githubusercontent.com/ddgksf2013/Scripts/master/bilibili_json.js

# 首页推荐信息流去广告 (去除大卡片广告)
^https?:\/\/app\.bilibili\.com\/x\/v2\/feed\/index url script-response-body https://raw.githubusercontent.com/ddgksf2013/Scripts/master/bilibili_json.js

# 追番/观影页去广告/Tab净化
^https?:\/\/api\.(bilibili|biliapi)\.(com|net)\/pgc\/page\/(bangumi|cinema\/tab\?) url script-response-body https://raw.githubusercontent.com/ddgksf2013/Scripts/master/bilibili_json.js

# 皮肤去除 / 强制默认主题
^https?:\/\/app\.bilibili\.com\/x\/resource\/show\/skin\? url reject-dict

# ==========================================
# 2. 强力内核去广告 
# ==========================================
# 动态、视频流、评论区、搜索结果去广告 (Proto格式)
# 这一部分负责让你看视频、刷动态时没有干扰
^https?:\/\/(app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.dynamic\.v\d\.Dynamic\/DynAll url script-response-body https://raw.githubusercontent.com/zirawell/R-Store/main/Res/Scripts/AntiAd/bilibiliProtoA.js
^https?:\/\/(app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.interface\.v\d\.Teenagers\/ModeStatus url script-response-body https://raw.githubusercontent.com/zirawell/R-Store/main/Res/Scripts/AntiAd/bilibiliProtoA.js
^https?:\/\/(app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.(view|viewunite)\.v\d\.View\/(?>View|ViewProgress) url script-response-body https://raw.githubusercontent.com/zirawell/R-Store/main/Res/Scripts/AntiAd/bilibiliProtoA.js
^https?:\/\/(app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.community\.service\.dm\.v\d\.DM\/DmView url script-response-body https://raw.githubusercontent.com/zirawell/R-Store/main/Res/Scripts/AntiAd/bilibiliProtoA.js
^https?:\/\/(app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.main\.community\.reply\.v\d\.Reply\/MainList url script-response-body https://raw.githubusercontent.com/zirawell/R-Store/main/Res/Scripts/AntiAd/bilibiliProtoA.js
^https?:\/\/(app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.polymer\.app\.search\.v\d\.Search\/SearchAll url script-response-body https://raw.githubusercontent.com/zirawell/R-Store/main/Res/Scripts/AntiAd/bilibiliProtoA.js

# ==========================================
# 3. 洁癖专属拦截 (Reject 规则)
# ==========================================
# 开屏广告 (直接拒绝，比脚本快)
^https?:\/\/app\.bilibili\.com\/x\/v2\/splash\/(list|show|event\/list2)\? url reject-dict
^https?:\/\/[\d\.]+:8000\/v1\/resource\/\w{32}-1-SPLASH url reject-dict

# 屏蔽搜索默认词 / 热搜
^https?:\/\/(app\.bilibili\.com|grpc\.biliapi\.net)\/bilibili\.app\.interface\.v1\.Search\/DefaultWords url reject-dict
^https?:\/\/app\.bilibili\.com\/x\/v\d\/search\/defaultwords url reject-dict
^https?:\/\/app\.bilibili\.com\/x\/v2\/search\/square url reject-dict

# 屏蔽直播间购物/广告
^https?:\/\/api\.live\.bilibili\.com\/xlive\/e-commerce-interface\/v\d\/ecommerce-user\/get_shopping_info\? url reject-dict

# 屏蔽各类红点/活动图标/浮窗
^https?:\/\/app\.bilibili\.com\/x\/resource\/top\/activity url reject-dict
^https?:\/\/api\.bilibili\.com\/x\/v2\/dm\/qoe\/show\? url reject-dict

# 隐私拦截 (IP与定位)
^https?:\/\/api\.bilibili\.com\/x\/web-interface\/zone\?jsonp url reject-dict
^https?:\/\/app\.bilibili\.com\/x\/resource\/ip url reject-dict
